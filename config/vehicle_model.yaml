# ============================================================
# Vehicle 3D Model - Toyota Aygo X 2024
# ============================================================
# Sistema di riferimento:
#   Origine: centro asse ruote posteriori a livello suolo
#   X: avanti (positivo)
#   Y: sinistra (positivo)
#   Z: su (positivo)
# ============================================================

vehicle:

  make: "Toyota"
  model: "Aygo X"
  year: 2024

  # ----------------------------------------------------------
  # Dimensioni globali (metri)
  # ----------------------------------------------------------
  dimensions:
    length: 3.70
    width: 1.74
    height: 1.525
    wheelbase: 2.43
    front_overhang: 0.806
    rear_overhang: 0.54
    ground_clearance: 0.132

  # ----------------------------------------------------------
  # Reference frame
  # ----------------------------------------------------------
  reference_frame:
    origin: "centro asse ruote posteriori a livello suolo"
    axes: "X avanti, Y sinistra, Z su"
    notes:
      - "Origine a Z = 0 (suolo)"
      - "Coordinate assolute, non relative"

  # ----------------------------------------------------------
  # FARI POSTERIORI
  # Ogni faro è modellato come FEATURE VERTICALE (2 punti 3D)
  # Misure ottenute da immagini reali (no CAD)
  # ----------------------------------------------------------
  tail_lights:

    description: "Fari posteriori LED verticali"
    distance_between_outer_points: 1.42   # distanza reale tra i punti esterni

    left:
      outer:  [-0.27,  0.70, 1.05]  # Punto più esterno SX
      top:    [-0.00,  0.50, 1.30]  # Punto più alto SX
      bottom: [-0.33,  0.50, 0.82]  # Punto più basso SX 
    right:
      outer:  [-0.27, -0.70, 1.05]  # Punto più esterno DX
      top:    [-0.00, -0.50, 1.30]  # Punto più alto DX
      bottom: [-0.33, -0.50, 0.82]  # Punto più basso DX







   # ----------------------------------------------------------
  # Punti di riferimento per PnP (metri)
  # X: avanti, Y: sinistra, Z: su
  # Il retro dell'auto è a X = -0.54 (rear_overhang)
  # ----------------------------------------------------------
  pnp_points_3d:
    light_l_outer:  [-0.27,  0.70, 1.05]   # rear edge, outer
    light_r_outer:  [-0.27, -0.70, 1.05]   # rear edge, outer
    light_l_top:    [-0.00,  0.50, 1.30]   # top of L-shape (more forward) 
    light_r_top:    [-0.00, -0.50, 1.30]   # top of L-shape (more forward) 
    light_l_bottom: [-0.33,  0.50, 0.82]   # rear edge, bottom
    light_r_bottom: [-0.33, -0.50, 0.82]   # rear edge, bottom



  # ----------------------------------------------------------
  # TARGA POSTERIORE
  # ----------------------------------------------------------

  plate_line_3d:
    y_start: 0.26   # Estremità sinistra targa
    y_end: -0.26    # Estremità destra targa
    z: 0.40         # Altezza da terra bordo inferiore
    x: -0.55        # Posizione X



  license_plate:
    center: [ -0.55, 0.0, 0.40 ]

    width: 0.52
    height: 0.11
    center_ground_offset: 0.45      # Altezza del centro targa da terra

    corners:
      bottom_left:  [-0.55,  0.26, 0.40] 
      bottom_right: [-0.55, -0.26, 0.40]

    mounting: "centro portellone posteriore"

  # ----------------------------------------------------------
  # BOUNDING BOX 3D DEL VEICOLO
  # Origine: centro asse ruote posteriori
  # X: -0.54m (dietro) → +3.16m (avanti)
  # Y: ±0.87m (larghezza/2)
  # Z: 0 (suolo) → 1.525m (tetto)
  # ----------------------------------------------------------
  bbox_vertices:

    # Base (suolo)
    bottom_rear_right:  [ -0.54, -0.87, 0.0 ]    # Paraurti posteriore destro
    bottom_rear_left:   [ -0.54,  0.87, 0.0 ]    # Paraurti posteriore sinistro
    bottom_front_left:  [  3.16,  0.87, 0.0 ]    # Paraurti anteriore sinistro
    bottom_front_right: [  3.16, -0.87, 0.0 ]    # Paraurti anteriore destro

    # Top (tetto)
    top_rear_right:     [ -0.54, -0.87, 1.525 ]  # Posteriore destro alto
    top_rear_left:      [ -0.54,  0.87, 1.525 ]  # Posteriore sinistro alto
    top_front_left:     [  3.16,  0.87, 1.525 ]  # Anteriore sinistro alto
    top_front_right:    [  3.16, -0.87, 1.525 ]  # Anteriore destro alto

  # ----------------------------------------------------------
  # Punti di riferimento aggiuntivi
  # ----------------------------------------------------------
  additional_reference_points:

    rear_wheel_center: [ 0.0, 0.0, 0.0 ]

    geometric_center:  [ 1.85, 0.0, 0.76 ]

    center_of_gravity: [ 1.75, 0.0, 0.50 ]

# ============================================================
# NOTE FINALI
# ============================================================
# - Tutte le coordinate sono in METRI
# - Sistema destrorso
# - Fari modellati come SEGMENTI, non punti
# - Nessuna assunzione CAD
# - Modello adatto a stima yaw da foreshortening
# ============================================================